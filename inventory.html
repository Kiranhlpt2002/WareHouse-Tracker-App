{% extends 'base.html' %}
{% block title %}Inventory{% endblock %}

{% block content %}
<h2 class="mb-4">Inventory Dashboard</h2>

<!-- Nav tabs -->
<ul class="nav nav-tabs mb-3" id="inventoryTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab">Products</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="transactions-tab" data-bs-toggle="tab" data-bs-target="#transactions" type="button" role="tab">Transactions</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="stock-tab" data-bs-toggle="tab" data-bs-target="#stock" type="button" role="tab">Stock Details</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summary" type="button" role="tab">Stock Summary</button>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content" id="inventoryTabsContent">

  <!-- Products -->
  <div class="tab-pane fade show active" id="products" role="tabpanel">
    <table class="table table-bordered table-striped">
      <thead><tr><th>Code</th><th>Name</th><th>Unit</th><th>Rate</th></tr></thead>
      <tbody>
        {% for p in products %}
        <tr><td>{{ p.prodcode }}</td><td>{{ p.prodname }}</td><td>{{ p.unit }}</td><td>{{ p.rate }}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Transactions -->
  <div class="tab-pane fade" id="transactions" role="tabpanel">
    <table class="table table-bordered table-striped">
      <thead><tr><th>No</th><th>Date</th><th>Type</th></tr></thead>
      <tbody>
        {% for t in transactions %}
        <tr><td>{{ t.trno }}</td><td>{{ t.trdate }}</td><td>{{ t.trtype }}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Stock Details -->
  <div class="tab-pane fade" id="stock" role="tabpanel">
    <table class="table table-bordered table-striped">
      <thead><tr><th>Transaction</th><th>Product</th><th>Quantity</th></tr></thead>
      <tbody>
        {% for s in stock_details %}
        <tr><td>{{ s.transaction.trno }}</td><td>{{ s.product.prodname }}</td><td>{{ s.qty }}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Stock Summary -->
  <div class="tab-pane fade" id="summary" role="tabpanel">
    <table class="table table-bordered table-striped">
      <thead><tr><th>Product</th><th>Total IN</th><th>Total OUT</th><th>Current Stock</th></tr></thead>
      <tbody>
        {% for item in stock_summary %}
        <tr>
          <td>{{ item.product.prodcode }} - {{ item.product.prodname }}</td>
          <td>{{ item.in_qty }}</td>
          <td>{{ item.out_qty }}</td>
          <td>{{ item.current_stock }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

<!-- Bootstrap JS (include at bottom) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
